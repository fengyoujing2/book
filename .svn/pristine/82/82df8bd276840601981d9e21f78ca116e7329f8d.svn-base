/*!
 * ZUI: 数据表格 - v1.5.0 - 2016-09-22
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2016 cnezsoft.com; Licensed MIT
 */
!function(t){"use strict";var e="zui.datatable",a=t.zui.store,s=function(a,s){this.name=e,this.$=t(a),this.isTable="TABLE"===this.$[0].tagName,this.firstShow=!0,this.isTable?(this.$table=this.$,this.id="datatable-"+(this.$.attr("id")||t.zui.uuid())):(this.$datatable=this.$.addClass("datatable"),this.$.attr("id")?this.id=this.$.attr("id"):(this.id="datatable-"+t.zui.uuid(),this.$.attr("id",this.id))),this.getOptions(s),this.load(),this.callEvent("ready")};s.DEFAULTS={checkable:!1,checkByClickRow:!0,checkedClass:"active",checkboxName:null,selectable:!0,sortable:!1,storage:!0,fixedHeader:!1,fixedHeaderOffset:0,fixedLeftWidth:"30%",fixedRightWidth:"30%",flexHeadDrag:!0,scrollPos:"in",rowHover:!0,colHover:!0,hoverClass:"hover",colHoverClass:"col-hover",mergeRows:!0,minColWidth:20,minFixedLeftWidth:200,minFixedRightWidth:200,minFlexAreaWidth:200,indexable:!0,indexstart:1},s.prototype.getOptions=function(e){var a=this.$;e=t.extend({},s.DEFAULTS,this.$.data(),e),e.tableClass=e.tableClass||"",e.tableClass=" "+e.tableClass+" table-datatable",t.each(["bordered","condensed","striped","condensed","fixed"],function(t,s){s="table-"+s,a.hasClass(s)&&(e.tableClass+=" "+s)}),(a.hasClass("table-hover")||e.rowHover)&&(e.tableClass+=" table-hover"),e.checkable&&t.fn.selectable||(e.selectable=!1),this.options=e},s.prototype.load=function(a){var s,i=this.options;if(t.isFunction(a))a=a(this.data,this),a.keepSort=!0;else if(t.isPlainObject(a))this.data=a;else if("string"==typeof a){var l=t(a);l.length&&(this.$table=l.first(),this.$table.data(e,this),this.isTable=!0),a=null}else a=i.data;if(!a){if(!this.isTable)throw new Error("No data avaliable!");a={cols:[],rows:[]},s=a.cols;var d,o,n,r,c,h,p=a.rows,f=this.$table;f.find("thead > tr:first").children("th").each(function(){o=t(this),s.push(t.extend({text:o.html(),flex:o.hasClass("flex-col"),width:"auto",cssClass:o.attr("class"),css:o.attr("style"),type:"string",ignore:o.hasClass("ignore"),sort:!o.hasClass("sort-disabled"),mergeRows:o.attr("merge-rows")},o.data()))}),f.find("tbody > tr").each(function(){n=t(this),c=t.extend({data:[],checked:!1,cssClass:n.attr("class"),css:n.attr("style"),id:n.attr("id")},n.data()),n.children("td").each(function(){if(r=t(this),h=r.attr("colspan")||1,c.data.push(t.extend({cssClass:r.attr("class"),css:r.attr("style"),text:r.html(),colSpan:h,title:r.attr("title")},r.data())),h>1)for(d=1;d<h;d++)c.data.push({empty:!0})}),p.push(c)});var u=f.find("tfoot");u.length&&(a.footer=t('<table class="table'+i.tableClass+'"></table>').append(u))}a.flexStart=-1,a.flexEnd=-1,s=a.cols,a.colsLength=s.length;for(var d=0;d<a.colsLength;++d){var g=s[d];g.flex&&(a.flexStart<0&&(a.flexStart=d),a.flexEnd=d)}0===a.flexStart&&a.flexEnd===a.colsLength&&(a.flexStart=-1,a.flexEnd=-1),a.flexArea=a.flexStart>=0,a.fixedRight=a.flexEnd>=0&&a.flexEnd<a.colsLength-1,a.fixedLeft=a.flexStart>0,a.flexStart<0&&a.flexEnd<0&&(a.fixedLeft=!0,a.flexStart=a.colsLength,a.flexEnd=a.colsLength),this.data=a,this.callEvent("afterLoad",{data:a}),this.render()},s.prototype.render=function(){var a,s,i,l,d=this,o=d.$datatable||(d.isTable?t('<div class="datatable" id="'+d.id+'"/>'):d.$datatable),n=d.options,r=d.data,c=d.data.cols,h=d.data.rows,p=n.checkable,f='<div class="datatable-rows-span datatable-span"><div class="datatable-wrapper"><table class="table"></table></div></div>',u='<div class="datatable-head-span datatable-span"><div class="datatable-wrapper"><table class="table"><thead></thead></table></div></div>';o.children(".datatable-head, .datatable-rows, .scroll-wrapper").remove(),o.toggleClass("sortable",n.sortable);var g,b,v,x=t('<div class="datatable-head"/>');for(a=t("<tr/>"),i=t("<tr/>"),l=t("<tr/>"),s=0;s<c.length;s++)v=c[s],g=s<r.flexStart?a:s>=r.flexStart&&s<=r.flexEnd?l:i,0===s&&n.indexable&&g.append('<th class="sort-disabled text-center" style="width:50px;">#</th>'),0===s&&p&&g.append('<th data-index="check" class="check-all check-btn"><i class="icon-check-empty"></i></th>'),v.ignore||(b=t("<th/>"),b.toggleClass("sort-down","down"===v.sort).toggleClass("sort-up","up"===v.sort).toggleClass("sort-disabled",v.sort===!1),b.addClass(v.cssClass).addClass(v.colClass).html(v.text).attr({"data-index":s,"data-type":v.type,"data-field":v.field,style:v.css}),g.append(b));var w;r.fixedLeft&&(w=t(u),w.addClass("fixed-left").find("table").addClass(n.tableClass).find("thead").append(a),x.append(w)),r.flexArea&&(w=t(u),w.addClass("flexarea").find(".datatable-wrapper").append('<div class="scrolled-shadow scrolled-in-shadow"></div><div class="scrolled-shadow scrolled-out-shadow"></div>').find("table").addClass(n.tableClass).find("thead").append(l),x.append(w)),r.fixedRight&&(w=t(u),w.addClass("fixed-right").find("table").addClass(n.tableClass).find("thead").append(i),x.append(w)),o.append(x);var C,y,k,m,$,S,z,E,T=t('<div class="datatable-rows">'),L=h.length;a=t("<tbody/>"),i=t("<tbody/>"),l=t("<tbody/>");for(var j=0;j<L;++j){for(S=h[j],"undefined"==typeof S.rowid&&(S.rowid=j),S.index=j,C=t("<tr/>"),C.addClass(S.cssClass).toggleClass(n.checkedClass,!!S.checked).attr({"data-index":j,"data-id":S.rowid}),y=C.clone(),k=C.clone(),E=S.data?S.data.length:Object.getOwnPropertyNames(S).length-1,s=0;s<E;++s)c[s]&&(z=S.data?S.data[s]:S,s>0&&z.empty||(g=s<r.flexStart?C:s>=r.flexStart&&s<=r.flexEnd?y:k,0===s&&n.indexable&&g.append(t('<td class="text-center" style="width:50px">'+(n.indexstart+S.rowid)+"</td>")),0===s&&p&&($=t('<td data-index="check" class="check-row check-btn"><i class="icon-check-empty"></i></td>'),n.checkboxName&&$.append('<input class="hide" type="checkbox" name="'+n.checkboxName+'" value="'+S.rowid+'">'),g.append($)),c[s].ignore||(t.isPlainObject(z)?(z.row=j,z.index=s,z.text=S[c[s].field]):z={text:z,row:j,index:s},S.data?S.data[s]=z:S=z,m=t("<td/>"),m.html(z.text).addClass(z.cssClass).addClass(c[s].colClass).attr("colspan",z.colSpan).attr({"data-row":j,"data-index":s,"data-flex":!1,"data-type":c[s].type,style:z.css,title:z.title||""}),g.append(m),t.each(c,function(t,e){e.dataable&&g.attr("data-field-"+e.field,S.data?"object"==typeof S.data[t]?S.data[t].text:S.data[t]:S[e.field])}))));a.append(C),l.append(y),i.append(k)}var A;r.fixedLeft&&(A=t(f),A.addClass("fixed-left").find("table").addClass(n.tableClass).append(a),T.append(A)),r.flexArea&&(A=t(f),A.addClass("flexarea").find(".datatable-wrapper").append('<div class="scrolled-shadow scrolled-in-shadow"></div><div class="scrolled-shadow scrolled-out-shadow"></div>').find("table").addClass(n.tableClass).append(l),T.append(A)),r.fixedRight&&(A=t(f),A.addClass("fixed-right").find("table").addClass(n.tableClass).append(i),T.append(A)),o.append(T),r.flexArea&&o.append('<div class="scroll-wrapper"><div class="scroll-slide scroll-pos-'+n.scrollPos+'"><div class="bar"></div></div></div>');var O=o.children(".datatable-footer").detach();r.footer?(o.append(t('<div class="datatable-footer"/>').append(r.footer)),r.footer=null):O.length&&o.append(O),d.$datatable=o.data(e,d),d.isTable&&d.firstShow&&(d.$table.attr("data-datatable-id",this.id).hide().after(o),d.firstShow=!1),d.bindEvents(),d.refreshSize(),d.$datatable.bind("resize",function(){d.refreshSize()}),d.callEvent("render")},s.prototype.bindEvents=function(){var e=this,s=this.data,i=this.options,l=this.$datatable,d=e.$dataSpans=l.children(".datatable-head, .datatable-rows").find(".datatable-span"),o=e.$rowsSpans=l.children(".datatable-rows").children(".datatable-rows-span"),n=e.$headSpans=l.children(".datatable-head").children(".datatable-head-span"),r=e.$cells=d.find("td, th"),c=e.$dataCells=r.filter("td");e.$headCells=r.filter("th");var h=e.$rows=e.$rowsSpans.find(".table > tbody > tr");if(i.rowHover){var p=i.hoverClass;o.on("mouseenter","td",function(){c.filter("."+p).removeClass(p),h.filter("."+p).removeClass(p),h.filter('[data-index="'+t(this).addClass(p).closest("tr").data("index")+'"]').addClass(p)}).on("mouseleave","td",function(){c.filter("."+p).removeClass(p),h.filter("."+p).removeClass(p)})}if(i.colHover){var f=i.colHoverClass;n.on("mouseenter","th",function(){r.filter("."+f).removeClass(f),r.filter('[data-index="'+t(this).data("index")+'"]').addClass(f)}).on("mouseleave","th",function(){r.filter("."+f).removeClass(f)})}if(s.flexArea){var u,g,b,v,x,w,C,y=l.find(".scroll-slide"),k=l.find(".datatable-span.flexarea"),m=l.find(".datatable-span.fixed-left"),$=l.find(".datatable-span.flexarea .table"),S=y.children(".bar"),z=e.id+"_scrollOffset";e.width=l.width(),l.resize(function(){e.width=l.width()});var E=function(t,e){x=Math.max(0,Math.min(u-g,t)),e||l.addClass("scrolling"),S.css("left",x),C=0-Math.floor((b-u)*x/(u-g)),$.css("left",C),v=x,l.toggleClass("scrolled-in",x>2).toggleClass("scrolled-out",x<u-g-2),i.storage&&a.pageSet(z,x)},T=function(){u=k.width(),y.width(u).css("left",m.width()),b=$.width(),g=Math.floor(u*u/b),S.css("width",g),$.css("min-width",u),l.toggleClass("show-scroll-slide",b>u),w||u===g||(w=!0,E(a.pageGet(z,0),!0)),l.hasClass("size-changing")&&E(x,!0)};k.resize(T),i.storage&&T();var L={move:!1,stopPropagation:!0,drag:function(t){E(S.position().left+t.smallOffset.x*(t.element.hasClass("bar")?1:-1))},finish:function(){l.removeClass("scrolling")}};t.fn.draggable?(S.draggable(L),i.flexHeadDrag&&l.find(".datatable-head-span.flexarea").draggable(L)):console.error("DataTable requires draggable.js to improve UI."),y.mousedown(function(t){var e=t.pageX-y.offset().left;E(e-g/2)})}if(i.checkable){var j,A=e.id+"_checkedStatus",O=i.checkedClass,_=function(){var l=o.first().find(".table > tbody > tr"),d=l.filter("."+O);l.find(".check-row input:checkbox").prop("checked",!1);var r={checkedAll:l.length===d.length&&d.length>0,checks:d.map(function(){return j=t(this).data("id"),i.checkboxName&&t(this).find(".check-row input:checkbox").prop("checked",!0),j}).toArray()};e.checks=r,t.each(s.rows,function(e,a){a.checked=t.inArray(a.id,r.checks)>-1}),n.find(".check-all").toggleClass("checked",!!r.checkedAll),i.storage&&a.pageSet(A,r),e.callEvent("checksChanged",{checks:r})},H=function(e,a){var s=t(e).closest("tr");void 0===a&&(a=!s.hasClass(O)),h.filter('[data-index="'+s.data("index")+'"]').toggleClass(O,!!a)},R="click.zui.datatable.check";if(i.selectable){var F={selector:".datatable-rows tr",trigger:".datatable-rows",start:function(e){var a=t(e.target).closest(".check-row, .check-btn");if(a.length)return a.is(".check-row")&&(H(a),_()),!1},rangeFunc:function(t,e){return Math.max(t.top,e.top)<Math.min(t.top+t.height,e.top+e.height)},select:function(t){H(t.target,!0)},unselect:function(t){H(t.target,!1)},finish:function(t){_()}};t.isPlainObject(i.selectable)&&t.extend(F,i.selectable),this.$datatable.selectable(F)}else this.$rowsSpans.off(R).on(R+"row",i.checkByClickRow?"tr":".check-row",function(){H(this),_()});if(this.$datatable.off(R).on("click.zui.datatable.check",".check-all",function(){h.toggleClass(O,t(this).toggleClass("checked").hasClass("checked")),_()}).on(R+".none",".check-none",function(){h.toggleClass(O,!1),_()}).on(R+".inverse",".check-inverse",function(){h.toggleClass(O),_()}),i.storage){var W=a.pageGet(A);W&&(n.find(".check-all").toggleClass("checked",W.checkedAll),W.checkedAll?h.addClass(O):(h.removeClass(O),t.each(W.checks,function(t,e){h.filter('[data-id="'+e+'"]').addClass(O)})),W.checks.length&&_())}}if(i.fixedHeader){var P,M,N,D=l.children(".datatable-head"),I=i.fixedHeaderOffset||t(".navbar.navbar-fixed-top").height()||0,U=function(){P=l.offset().top,N=t(window).scrollTop(),M=l.height(),l.toggleClass("head-fixed",N+I>P&&N+I<P+M),l.hasClass("head-fixed")?D.css({width:l.width(),top:I}):D.attr("style","")};t(window).scroll(U),U()}i.sortable?n.on("click","th:not(.sort-disabled, .check-btn)",function(){l.hasClass("size-changing")||e.sortTable(t(this))}):i.mergeRows&&this.mergeRows()},s.prototype.mergeRows=function(){for(var e=this.$rowsSpans.find(".table > tbody > tr > td"),a=this.data.cols,s=0;s<a.length;s++){var i=a[s];if(i.mergeRows){var l=e.filter('[data-index="'+s+'"]');if(l.length>1){var d,o;l.each(function(){var e=t(this);d&&e.html()===d.html()?(o=d.attr("rowspan")||1,"number"!=typeof o&&(o=parseInt(o),isNaN(o)&&(o=1)),d.attr("rowspan",o+1).css("vertical-align","middle"),e.remove()):d=e})}}}},s.prototype.sortTable=function(e){var a=t.zui.store,s=this.options,i=this.id+"_datatableSorter",l=s.storage?a.pageGet(i):null;if(e||(e=l?this.$headCells.filter('[data-index="'+l.index+'"]').addClass("sort-"+l.type):this.$headCells.filter(".sort-up, .sort-down").first()),e.length){var d,o,n,r=this.data,c=r.cols,h=(r.rows,this.$headCells);d=!e.hasClass("sort-up"),r.keepSort&&(d=!d),r.keepSort=null,h.removeClass("sort-up sort-down"),e.addClass(d?"sort-up":"sort-down"),n=e.data("index"),t.each(c,function(t,e){t==n||"up"!==e.sort&&"down"!==e.sort?t==n&&(e.sort=d?"up":"down",o=e.type):e.sort=!0}),l={index:n,field:e.data("field"),type:d?"up":"down"},s.storage&&a.pageSet(i,l),this.callEvent("sort",{sorter:l})}},s.prototype.refreshSize=function(){var e,a=this.$datatable,s=this.options,i=this.data.rows,l=this.data.cols;a.find(".datatable-span.fixed-left").css("width",s.fixedLeftWidth),a.find(".datatable-span.fixed-right").css("width",s.fixedRightWidth);var d=function(e){var a,s,i=0;return e.css("height","auto"),e.each(function(){a=t(this),s=a.attr("rowspan"),s&&1!=s||(i=Math.max(i,a.outerHeight()))}),i},o=this.$dataCells,n=this.$cells,r=this.$headCells;for(e=0;e<l.length;++e)n.filter('[data-index="'+e+'"]').css("width",l[e].width);var c=d(r);r.css("min-height",c).css("height",c);var h;for(e=0;e<i.length;++e){h=o.filter('[data-row="'+e+'"]');var p=d(h);h.css("min-height",p).css("height",p)}this.callEvent("sizeChanged")},s.prototype.callEvent=function(t,e){var a=this.$.callEvent(t+"."+this.name,e,this).result;return!(void 0!==a&&!a)},t.fn.datatable=function(a,i){return this.each(function(){var l=t(this),d=l.data(e),o="object"==typeof a&&a;d||l.data(e,d=new s(this,o)),"string"==typeof a&&("load"!==a||!t.isPlainObject(i)||void 0!==i.keepSort&&null!==i.keepSort||(i.keepSort=!0),d[a](i))})},t.fn.datatable.Constructor=s}(jQuery),function(t){"use strict";var e="zui.datagrid",a=function(a,s){this.name=e,this.$=t(a),this.id="datagrid-"+t.zui.uuid(),this.$.attr("id",this.id),this.getOptions(s),this.load(),this.callEvent("ready")};a.DEFAULTS={indexenable:!0,indexstart:1,sizeable:!0,sizes:[10,20,50],toolboxable:!0,btns:[{id:"add",text:"添加",icon:"plus"},{id:"edit",text:"修改",icon:"edit",hr:!0},{id:"remove",text:"删除",icon:"remove text-danger"}],searchable:!0,searchfield:null,pagerable:!0,currentpage:0,currentsize:10,total:0,pagecount:0,pagerfit:!0,datatype:"ajax",url:null,ajaxtype:"get",data:[],cols:[],fixedLeftWidth:"50%",fixedRightWidth:"100px",scrollContainer:null,fixedHeaderOffset:60,checkable:!0,sortable:!0,sortField:"price",sortType:"down",indexable:!0,loadasync:!0,isfirstload:!0,btntmpl:'<button id="{{id}}" class="btn btn-link {{cls}}"><i class="icon icon-{{icon}}"></i>{{text}}</button>',pagerinfotmpl:"每页 {{pagesize}} 条,共 {{total}} 条",searchtmpl:'<div class="input-group" style="width:250px;"><input type="text" class="form-control pull-right" placeholder="搜索条件"><span class="input-group-btn"><button class="btn btn-default" type="button">搜索</button></span></div>',pagerbtnstmpl:'<ul class="pager pull-left"><li><a id="pager_first" title="首页"><i class="icon icon-step-backward"></i></a></li><li><a id="pager_previous" title="上一页"><i class="icon icon-play icon-flip-horizontal"></i></a></li><li><a title="当前页码" class="currentPage"><input  type="text" value="{{currentpage}}"> / <lable>{{pagecount}}</lable></a></li><li><a id="pager_next" title="下一页"><i class="icon icon-play"></i></a></li><li><a id="pager_last" title="尾页"><i class="icon icon-step-forward"></i></a></li></ul>'},a.prototype.getOptions=function(e){this.$;e=t.extend({},a.DEFAULTS,this.$.data(),e),this.options=e},a.prototype.load=function(e){var a=this;if("ajax"===this.options.datatype){if(!this.options.url)throw new Error("no exist grid ajax url!");this.options.indexstart=this.options.currentpage*this.options.currentsize+1;var s={pageindex:this.options.currentpage,pagesize:this.options.currentsize};a.options.sortable&&a.options.sortField.length>0&&(s.sortfield=a.options.sortField,s.sortorder="down"==a.options.sortType?"asc":"desc"),e="object"==typeof e?t.extend({},s,this.$.data(),e):s,t.ajax({url:this.options.url,type:this.options.ajaxtype,data:e,success:function(t){a.options.data=t.data,a.options.total=t.total,a.options.pagecount=Math.ceil(a.options.total/a.options.currentsize),a.callEvent("afterLoad",{data:a.options.data}),a.render()},error:function(t){console.log(t)}})}else{if(e?a.options.data=e:e=this.options.data,this.options.total=e.length,this.options.pagecount=1,0==e.length)return;a.callEvent("afterLoad",{data:e})}a.render()},a.prototype.render=function(){var e,a=this.options,s=this,i=t('<div class="grid"></div>');if(a.toolboxable){if(e=t('<div class="toolbox"></div>'),a.btns.length>0){var l=t('<div class="pull-left"></div>'),d=a.btntmpl;t.each(a.btns,function(e,a){l.append(d.replace("{{cls}}",a.cls?a.cls:"").replace("{{icon}}",a.icon?a.icon:"").replace("{{id}}",a.id?a.id:"btn"+t.zui.uuid()).replace("{{text}}",a.text?a.text:"")),a.hr&&l.append('<i class="icon icon-ellipsis-v"></i>')}),e.append(l)}if(a.searchable){var o=t('<div class="pull-right"></div>');o.append(a.searchtmpl),e.append(o)}i.append(e)}var n=t('<div class="grid-content"><div class="datatable"></div></div>');a.pagerfit&&n.addClass("grid-content-fit"),i.append(n);var r;if(a.pagerable){r=t('<div class="grid-footer grid-border-top "></div>'),r.append(a.pagerbtnstmpl.replace("{{pagecount}}",a.pagecount).replace("{{currentpage}}",parseInt(a.currentpage)+1)).find(".currentPage input").attr("id","index_"+this.id);var c=t('<label class="pager pull-right" style="margin-top:7px;"></label>'),h=a.pagerinfotmpl.replace("{{total}}",a.total);if(a.sizeable){var p=t("<select></select>");p.attr("id","size_"+this.id),t.each(a.sizes,function(t,e){p.append('<option value="'+e+'" '+(a.currentsize==e?"selected":"")+">"+e+"</option>")}),h=h.replace("{{pagesize}}",p[0].outerHTML)}else h=h.replace("{{pagesize}}",a.currentsize);c.append(h),r.append(c),i.append(r)}this.$.html(i),this.datatable=this.$.find(".datatable").datatable({fixedLeftWidth:a.fixedLeftWidth,fixedRightWidth:a.fixedRightWidth,data:{rows:a.data,cols:a.cols},fixedHeaderOffset:a.fixedHeaderOffset,checkable:a.checkable,sortable:a.sortable,indexable:a.indexable,indexstart:a.indexstart,sort:function(t){console.log({sortfield:a.sortField,filed:t.sorter.field,sorttype:a.sortType,type:t.sorter.type}),a.sortField==t.sorter.field&&a.sortType==t.sorter.type||(a.sortField=t.sorter.field,a.sortType=t.sorter.type,s.load())}}),this.resetpager(),this.bindEvents(),this.callEvent("render")},a.prototype.resetpager=function(){var t=this.$.find(".pager");if(t.find(".disabled").removeClass("disabled"),t.find(".input").removeAttr("readonly"),this.options.pagecount<=1)return t.find("a").addClass("disabled"),void t.find("input").attr("readonly","readonly");var e=parseInt(this.options.currentpage+1);return e===this.options.pagecount?(t.find("#pager_last").addClass("disabled"),void t.find("#pager_next").addClass("disabled")):1==e?(t.find("#pager_first").addClass("disabled"),void t.find("#pager_previous").addClass("disabled")):void 0},a.prototype.previous=function(){this["goto"](this.options.currentpage)},a.prototype.next=function(){this["goto"](this.options.currentpage+2)},a.prototype.first=function(){this["goto"](1)},a.prototype.last=function(){this["goto"](this.options.pagecount)},a.prototype["goto"]=function(t){t<1&&(t=1),t>this.options.pagecount&&(t=this.options.pagecount),this.options.currentpage!=t-1&&(this.options.currentpage=t-1,this.load())},a.prototype.bindEvents=function(){var t=this;this.$.find("#size_"+this.id).on("change",function(e){t.options.currentsize=parseInt(e.currentTarget.value),t.options.currentpage=0,t.load()}),this.$.find("#index_"+this.id).on("change",function(e){return t.options.currentpage==parseInt(e.currentTarget.value)-1?void(e.currentTarget.value=parseInt(e.currentTarget.value)):void t["goto"](parseInt(e.currentTarget.value))}),this.$.find("#pager_first").on("click",function(e){t.first()}),this.$.find("#pager_last").on("click",function(e){t.last()}),this.$.find("#pager_previous").on("click",function(e){t.previous()}),this.$.find("#pager_next").on("click",function(e){t.next()})},a.prototype.getOptions=function(e){this.$;e=t.extend({},a.DEFAULTS,this.$.data(),e),this.options=e},a.prototype.callEvent=function(t,e){var a=this.$.callEvent(t+"."+this.name,e,this).result;return!(void 0!==a&&!a)},t.fn.grid=function(s,i){return this.each(function(){var l=t(this),d=l.data(e),o="object"==typeof s&&s;d||l.data(e,d=new a(this,o)),"string"==typeof s&&("load"!==s||!t.isPlainObject(i)||void 0!==i.keepSort&&null!==i.keepSort||(i.keepSort=!0),d[s](i))})},t.fn.grid.Constructor=a}(jQuery);